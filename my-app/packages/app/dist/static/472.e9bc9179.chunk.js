"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[472,7640],{143:(h,r,t)=>{t.d(r,{f:()=>E});var e=t(14041),c=t(55290),d=t(23730);const E={createCopyDocsUrlAction(l){return n=>({icon:()=>e.createElement(c.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>l(`${window.location.origin}${n.resolved.docsUrl}`)})},createStarEntityAction(l,n){return g=>{const a=g.entity,i=l(a);return{cellStyle:{paddingLeft:"1em"},icon:()=>e.createElement(d.m,{isFavorite:i}),tooltip:i?"Remove from favorites":"Add to favorites",onClick:()=>n(a)}}}}},4348:(h,r,t)=>{t.d(r,{V:()=>e});function e(c,d){return d.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?c:c.toLocaleLowerCase("en-US")}},19108:(h,r,t)=>{t.d(r,{A:()=>e,G:()=>c});const e="backstage.io/techdocs-ref",c="backstage.io/techdocs-entity"},30472:(h,r,t)=>{t.r(r),t.d(r,{CustomDocsPanel:()=>B,TechDocsCustomHome:()=>U});var e=t(14041),c=t(73466),d=t(58837),E=t(97214),l=t(78560),n=t(18139),g=t(94223),a=t(699);function i(){const o=(0,n.gf)(g.K),{loading:s,value:u}=(0,c.A)(async()=>{const{ownershipEntityRefs:m}=await o.getBackstageIdentity();return m},[]),C=(0,e.useMemo)(()=>{const m=new Set(u??[]);return A=>{const P=(0,a.t)(A,E.vv).map(l.U2);for(const M of P)if(m.has(M))return!0;return!1}},[u]);return{loading:s,isOwnedEntity:C}}var f=t(18453),p=t(30043),H=t(24259),K=t(67633),G=t(17749),y=t(4348),x=t(72814),z=t(54195),V=t(17174),J=t(45575),Q=t(87318),Z=t(40703),k=t(59469),b=t(48653),R=t(57369);const j=o=>{const{entities:s}=o,u=(0,x.S)(G.Oc),C=(0,n.gf)(z.U);return s?e.createElement(V.s,{"data-testid":"docs-explore"},s?.length?s.map((m,A)=>e.createElement(Z.A,{key:A},e.createElement(R.A,null,e.createElement(J.f,{title:m.metadata.title??m.metadata.name})),e.createElement(b.A,null,m.metadata.description),e.createElement(k.A,null,e.createElement(Q.z,{to:u({namespace:(0,y.V)(m.metadata.namespace??"default",C),kind:(0,y.V)(m.kind,C),name:(0,y.V)(m.metadata.name,C)}),color:"primary","data-testid":"read_docs"},"Read Docs")))):null):null};var $=t(17138),w=t(56420),_=t(16454),X=t(96872),q=t(99338),et=t(62112),nt=t(44390),tt=t(21332),at=t(75202),ot=t(91072);const D=(0,d.A)(o=>({linkSpacer:{paddingTop:o.spacing(.2)},readMoreLink:{paddingTop:o.spacing(.2)}}),{name:"BackstageInfoCardGrid"}),I=o=>{const{entities:s,linkContent:u,linkDestination:C}=o,m=D(),A=(0,x.S)(G.Oc),P=(0,n.gf)(z.U),M=v=>{if(C){const W=C(v);if(W)return W}return A({namespace:(0,y.V)(v.metadata.namespace??"default",P),kind:(0,y.V)(v.kind,P),name:(0,y.V)(v.metadata.name,P)})},F=(0,n.gf)(ot.n),{value:N,loading:Y}=(0,c.A)(async()=>new Map(await Promise.all(s?.map(async v=>{const W=await F.forEntity(v).promise;return[(0,l.U2)(v),W]})||[])));return Y?e.createElement(X.k,null):!s||!s?.length?null:e.createElement(V.s,{"data-testid":"info-card-container"},s.map(v=>e.createElement(tt.n,{key:v.metadata.name,"data-testid":v?.metadata?.title,title:N?.get((0,l.U2)(v))?.primaryTitle},e.createElement("div",null,v?.metadata?.description),e.createElement("div",{className:m.linkSpacer}),e.createElement(at.N_,{to:M(v),className:m.readMoreLink,"data-testid":"read-docs-link"},u||"Read Docs"))))};var O=t(88461),L=t(47640),T=t(19108);const S={DocsTable:K.o,DocsCardGrid:j,TechDocsIndexPage:L.TechDocsIndexPage,InfoCardGrid:I},B=({config:o,entities:s,index:u})=>{const m=(0,d.A)({panelContainer:{marginBottom:"2rem",...o.panelCSS?o.panelCSS:{}}})(),{loading:A,isOwnedEntity:P}=i(),M=S[o.panelType],F=s.filter(Y=>o.filterPredicate==="ownedByUser"?A?!1:P(Y):typeof o.filterPredicate=="function"&&o.filterPredicate(Y)),N=o.panelProps?.CustomHeader||(()=>e.createElement($.d,{title:o.title,description:o.description},u===0?e.createElement(w.Y,null,"Discover documentation in your ecosystem."):null));return e.createElement(e.Fragment,null,e.createElement(N,null),e.createElement("div",{className:m.panelContainer},e.createElement(f.B9,null,e.createElement(M,{"data-testid":"techdocs-custom-panel",entities:F,...o.panelProps}))))},U=o=>{const{tabsConfig:s,filter:u,CustomPageWrapper:C}=o,[m,A]=(0,e.useState)(0),P=(0,n.gf)(p.v),{value:M,loading:F,error:N}=(0,c.A)(async()=>(await P.getEntities({filter:{...u,[`metadata.annotations.${T.A}`]:H.c},fields:["apiVersion","kind","metadata","relations","spec.owner","spec.type"]})).items.filter(W=>!!W.metadata.annotations?.[T.A])),Y=s[m];return F?e.createElement(O.S,{CustomPageWrapper:C},e.createElement(_.U,null,e.createElement(X.k,null))):N?e.createElement(O.S,{CustomPageWrapper:C},e.createElement(_.U,null,e.createElement(q.B,{severity:"error",title:"Could not load available documentation."},e.createElement(et.z,{language:"text",text:N.toString()})))):e.createElement(O.S,{CustomPageWrapper:C},e.createElement(nt.o,{selectedIndex:m,onChange:v=>A(v),tabs:s.map(({label:v},W)=>({id:W.toString(),label:v}))}),e.createElement(_.U,{"data-testid":"techdocs-content"},Y.panels.map((v,W)=>e.createElement(B,{key:W,config:v,entities:M||[],index:W}))))}},45575:(h,r,t)=>{t.d(r,{f:()=>a});var e=t(77125),c=t(99703),d=t(58837),E=t(72501),l=t(14041);const n=i=>(0,c.A)({root:{color:i.palette.common.white,padding:i.spacing(2,2,3),backgroundImage:i.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),g=(0,d.A)(n,{name:"BackstageItemCardHeader"});function a(i){const{title:f,subtitle:p,children:H}=i,K=g(i);return l.createElement(e.A,{className:K.root},p&&l.createElement(E.A,{variant:"subtitle2",component:"h3"},p),f&&l.createElement(E.A,{variant:"h6",component:"h4"},f),H)}},47640:(h,r,t)=>{t.r(r),t.d(r,{TechDocsIndexPage:()=>ot});var e=t(14041),c=t(18690),d=t(17138),E=t(56420),l=t(16454),n=t(18453),g=t(77509),a=t(30117),i=t(40941),f=t(56829),p=t(88461),H=t(24259),K=t(19108);class G{getCatalogFilters(){return{[`metadata.annotations.${K.A}`]:H.c}}}const y=()=>{const{updateFilters:D}=(0,n.nK)();return(0,e.useEffect)(()=>{D({techdocs:new G})},[D]),null};var x=t(36338),z=t(45250),V=t(99338),J=t(62112),Q=t(72814),Z=t(18139),k=t(54195),b=t(44861),R=t(67633),j=t(29021),$=t(49724);function w(D){const{actions:I,columns:O,data:L,isLoading:T,options:S}=D,{updateFilters:B,setLimit:U,setOffset:o,limit:s,totalItems:u,offset:C}=(0,n.nK)(),[m,A]=e.useState(C&&s?Math.floor(C/s):0);return(0,e.useEffect)(()=>{u&&m*s>=u?o(Math.max(0,u-s)):o(Math.max(0,m*s))},[o,m,s,u]),e.createElement(j.X,{columns:O,data:L,options:{paginationPosition:"both",pageSizeOptions:[5,10,20,50,100],pageSize:s,emptyRowsWhenPaging:!1,actionsColumnIndex:-1,...S},actions:I,onSearchChange:P=>B({text:P?new $.V3(P):void 0}),page:m,onPageChange:P=>{A(P)},onRowsPerPageChange:P=>{U(P)},totalCount:u,localization:{pagination:{labelDisplayedRows:""}},isLoading:T})}function _(D){const{actions:I,columns:O,data:L,next:T,prev:S,title:B,isLoading:U,options:o,...s}=D;return e.createElement(j.X,{title:U?"":B,columns:O,data:L,options:{paginationPosition:"both",...o,pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1,actionsColumnIndex:-1},onPageChange:u=>{u>0?T?.():S?.()},page:S?1:0,totalCount:T?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}},isLoading:U,...s})}var X=t(143),q=t(61231),et=t(17749),nt=t(51529);const tt=D=>{const{columns:I,actions:O,options:L}=D,{loading:T,error:S,entities:B,filters:U,paginationMode:o,pageInfo:s}=(0,n.nK)(),{isStarredEntity:u,toggleStarredEntity:C}=(0,b.I)(),[,m]=(0,x.A)(),A=(0,Q.S)(et.Oc),P=(0,Z.gf)(k.U),M=(0,z.capitalize)(U.user?.value??"all"),F=[X.f.createCopyDocsUrlAction(m),X.f.createStarEntityAction(u,C)],N=(0,nt.H)(B,A,P);return o==="cursor"?e.createElement(_,{columns:I||q.F,isLoading:T,title:M,actions:O||F,options:L,data:N,next:s?.next,prev:s?.prev}):o==="offset"?e.createElement(w,{columns:I||q.F,isLoading:T,title:M,actions:O||F,options:L,data:N}):S?e.createElement(V.B,{severity:"error",title:"Could not load available documentation."},e.createElement(J.z,{language:"text",text:S.toString()})):e.createElement(R.o,{title:M,entities:B,loading:T,actions:O||F,columns:I,options:L})};tt.columns=q.B,tt.actions=X.f;const at=D=>{const{initialFilter:I="owned",columns:O,actions:L,ownerPickerMode:T,pagination:S,options:B,PageWrapper:U,CustomHeader:o}=D,s=U||p.S,u=o||(()=>e.createElement(d.d,{title:""},e.createElement(E.Y,null,"Discover documentation in your ecosystem.")));return e.createElement(s,null,e.createElement(l.U,null,e.createElement(u,null),e.createElement(n.B9,{pagination:S},e.createElement(g.GI,null,e.createElement(g.GI.Filters,null,e.createElement(y,null),e.createElement(a.y,{initialFilter:I}),e.createElement(i.t,{mode:T}),e.createElement(f.m,null)),e.createElement(g.GI.Content,null,e.createElement(tt,{actions:L,columns:O,options:B}))))))},ot=D=>(0,c.P1)()||e.createElement(at,{...D})},51529:(h,r,t)=>{t.d(r,{H:()=>l});var e=t(97214),c=t(699),d=t(53318),E=t(4348);function l(n,g,a){return n.map(i=>{const f=(0,c.t)(i,e.vv);return{entity:i,resolved:{docsUrl:g({namespace:(0,E.V)(i.metadata.namespace??"default",a),kind:(0,E.V)(i.kind,a),name:(0,E.V)(i.metadata.name,a)}),ownedByRelations:f,ownedByRelationsTitle:f.map(p=>(0,d.S)(p,{defaultKind:"group"})).join(", ")}}})}},55290:(h,r,t)=>{var e,c=t(4293),d=t(78920);e={value:!0},r.A=void 0;var E=d(t(14041)),l=c(t(74044)),n=(0,l.default)(E.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");r.A=n},61231:(h,r,t)=>{t.d(r,{B:()=>n,F:()=>g});var e=t(14041),c=t(49907),d=t(75202),E=t(14158);function l(a){return a.metadata.title||a.metadata.name}const n={createTitleColumn(a){return{...n.createNameColumn(),field:"entity.metadata.title",hidden:a?.hidden}},createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,searchable:!0,defaultSort:"asc",customSort:(a,i)=>{const f=l(a.entity).toLocaleLowerCase(),p=l(i.entity).toLocaleLowerCase();return f.localeCompare(p)},render:a=>e.createElement(c.m,{value:e.createElement(d.N_,{to:a.resolved.docsUrl},l(a.entity)),subvalue:a.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:a})=>e.createElement(E.i,{entityRefs:a.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},g=[n.createTitleColumn({hidden:!0}),n.createNameColumn(),n.createOwnerColumn(),n.createKindColumn(),n.createTypeColumn()]},67633:(h,r,t)=>{t.d(r,{o:()=>K});var e=t(14041),c=t(36338),d=t(72814),E=t(18139),l=t(54195),n=t(17749),g=t(29021),a=t(65995),i=t(87318),f=t(143),p=t(61231),H=t(51529);const K=G=>{const{entities:y,title:x,loading:z,columns:V,actions:J,options:Q}=G,[,Z]=(0,c.A)(),k=(0,d.S)(n.Oc),b=(0,E.gf)(l.U);if(!y)return null;const R=(0,H.H)(y,k,b),j=[f.f.createCopyDocsUrlAction(Z)],$=20,w=R&&R.length>$;return e.createElement(e.Fragment,null,z||R&&R.length>0?e.createElement(g.X,{isLoading:z,options:{paging:w,pageSize:$,search:!0,actionsColumnIndex:-1,...Q},data:R,columns:V||p.F,actions:J||j,title:x?`${x} (${R.length})`:`All (${R.length})`}):e.createElement(a.p,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:e.createElement(i.z,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};K.columns=p.B,K.actions=f.f},88461:(h,r,t)=>{t.d(r,{S:()=>l});var e=t(14041),c=t(92303),d=t(18139),E=t(54195);const l=n=>{const{children:g,CustomPageWrapper:a}=n,f=`Documentation available in ${(0,d.gf)(E.U).getOptionalString("organization.name")??"Backstage"}`;return e.createElement(e.Fragment,null,a?e.createElement(a,null,g):e.createElement(c.d,{title:"Documentation",subtitle:f,themeId:"documentation"},g))}},92303:(h,r,t)=>{t.d(r,{d:()=>E});var e=t(14041),c=t(79182),d=t(82326);function E(l){const{themeId:n,children:g,...a}=l;return e.createElement(d.Y,{themeId:n},e.createElement(c.Y,{...a}),g)}}}]);})();

//# sourceMappingURL=472.e9bc9179.chunk.js.map